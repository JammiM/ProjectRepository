<!DOCTYPE html>
<html lang="en">
	<meta charset="UTF-8"> 
<head>
</head>
<body>
<script src="Three.js"></script>
		<script src="Detector.js"></script>
		<script src="RequestAnimationFrame.js"></script>
		<script src="Stats.js"></script>
		<script>

			var CUBE_SIZE = 250;
			var INCREASEBYNUMBER = 100;
			var DISTANCE = 1000;
			
			var scene;
			var renderer;
			var camera;
			var stats;
			var cubes = [];
			var material;
			var cubeHolder;
			var rotSpeed;
			var cubeCount = 0;
			var geometry;
			var windowHalfX;
			var windowHalfY;

			initialise();

			function initialise(){




				//init 3D world
				var container = document.createElement('div');
				document.body.appendChild(container);
				renderer = new THREE.WebGLRenderer({
					antialias : false,
					clearAlpha : 1
				});
				container.appendChild(renderer.domElement);


				camera = new THREE.PerspectiveCamera(55, window.innerWidth / window.innerHeight, 20, 3000);
				camera.position.z = 1000;
				scene = new THREE.Scene();
				scene.add(camera);

				cubeHolder = new THREE.Object3D();
				scene.add(cubeHolder);				




				var light = new THREE.PointLight(0xffeeaa, 1);
				light.position = new THREE.Vector3(-1000, 1000, -1000);
				scene.add(light);


				var material = new THREE.MeshLambertMaterial({
						opacity : 0.5,
						blending : THREE.AdditiveBlending,
						depthTest : false,
						transparent : true
					});
					material.color = new THREE.Color(0xFFFFFF * Math.random());




				geometry = new THREE.CubeGeometry(CUBE_SIZE, CUBE_SIZE, CUBE_SIZE);
				//addCubes();

				resizeWindow(null);
				update();





			}//initialise
			function addCubes(){
				//init cubes
				for(var j = 0; j < DISTANCE; j++) {
					var cube = new THREE.Mesh(geometry, material);
					

					cubeHolder.add(cube);
					cubes.push(cube);

					cube.position.x = Math.random() * DISTANCE - DISTANCE / 2;
					cube.position.y = Math.random() * DISTANCE - DISTANCE / 2;
					cube.position.z = Math.random() * DISTANCE - DISTANCE / 2;

				}//loopEnd








			}//addCubes
			function buttonPress(){				
				//if(
					// spacebar is down
				//	) {
					addCubes();
				}//buttonPress
			function update(){
				requestAnimationFrame(update);
				render();
			}//update
			function render(){
				camera.lookAt(cubeHolder.position);
				renderer.render(scene, camera);

			}//render
			function resizeWindow(event){				
				windowHalfX = window.innerWidth / 2;
				windowHalfY = window.innerHeight / 2;
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize(window.innerWidth, window.innerHeight);
			}//resizeWindow
		</script>
		<canvas></canvas>
		<p>Number of cubes</p>
		
</body>
</html>